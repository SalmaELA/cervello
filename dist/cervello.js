!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("Cervello",[],r):"object"==typeof exports?exports.Cervello=r():t.Cervello=r()}(this,function(){return function(t){function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}var e={};return r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=2)}([function(t,r,e){var i,n;i=[e,r],void 0!==(n=function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(t){var r=function(){function t(t,r){this.input=t,this.output=r}return t}();t.Normalize=r;var e=function(){function t(t,r){this.sum=t,this.result=r}return t}();t.Sum=e}(r.Data||(r.Data={}))}.apply(r,i))&&(t.exports=n)},function(t,r,e){var i,n;i=[e,r],void 0!==(n=function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(t){!function(t){var r=function(){function t(){}return t.prototype.value=function(t){return 1/(1+Math.exp(-t))},t.prototype.prime=function(t){return Math.exp(-t)/Math.pow(1+Math.exp(-t),2)},t}();t.Sigmoid=r;var e=function(){function t(){}return t.prototype.value=function(t){if(t===1/0)return 1;if(t===-1/0)return-1;var r;return((r=Math.exp(2*t))-1)/(r+1)},t.prototype.prime=function(t){return 1-Math.pow((Math.exp(2*t)-1)/(Math.exp(2*t)+1),2)},t}();t.Htan=e;var i=function(){function t(){}return t.relu=function(t){return t>0?t:t/320},t.prime=function(t){return t>0?1:0},t}();t.Relu=i}(t.Activation||(t.Activation={}));var r=function(){function t(){}return t.random=function(){return Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random())},t}();t.Gaussian=r;var e=function(){function t(t){if(this.m=[],Array.isArray(t)){this.rows=t.length,this.cols=t[0].length;for(var r=0;r<this.rows;r++){this.m[r]=[];for(var e=0;e<this.cols;e++)this.m[r][e]=t[r][e]}}else{this.rows=t.rows,this.cols=t.cols;for(var i=0;i<this.rows;i++){this.m[i]=[];for(var n=0;n<this.cols;n++)if(t.values){var o=t.values();this.m[i][n]=o}else this.m[i][n]=0}}}return t.prototype.get=function(){return this},t.prototype.transform=function(t){for(var r=0;r<this.rows;r++)for(var e=0;e<this.cols;e++)this.m[r][e]=t(this.m[r][e]);return this},t.add=function(r,e){if(r.rows!==e.rows||r.cols!==e.cols)throw new Error("You can only add matrices with equal dimensions");for(var i=new t({rows:r.rows,cols:r.cols}),n=0;n<r.rows;n++)for(var o=0;o<r.cols;o++)i.m[n][o]=r.m[n][o]+e.m[n][o];return i},t.subtract=function(r,e){if(r.rows!==e.rows||r.cols!==e.cols)throw new Error("You can only subtract matrices with equal dimensions");for(var i=new t({rows:r.rows,cols:r.cols}),n=0;n<r.rows;n++)for(var o=0;o<r.cols;o++)i.m[n][o]=r.m[n][o]-e.m[n][o];return i},t.multiplyElements=function(r,e){for(var i=new t({rows:r.rows,cols:r.cols}),n=0;n<r.rows;n++){i.m[n]=[];for(var o=0;o<r.m[n].length;o++)i.m[n][o]=r.m[n][o]*e.m[n][o]}return i},t.multiplyScalar=function(r,e){for(var i=new t({rows:r.rows,cols:r.cols}),n=0;n<r.rows;n++)for(var o=0;o<r.cols;o++)i.m[n][o]=r.m[n][o]*e;return i},t.prototype.transpose=function(){for(var r=new t({rows:this.cols,cols:this.rows}),e=0;e<this.cols;e++){r.m[e]=[];for(var i=0;i<this.rows;i++)r.m[e][i]=this.m[i][e]}return r},t.multiply=function(r,e){if(r.cols!==e.rows)throw new Error("You can only multiply matrices with equal dimensions");for(var i=new t({rows:r.rows,cols:e.cols}),n=0;n<r.rows;n++){i.m[n]=[];for(var o=0;o<e.cols;o++){for(var s=0,a=0;a<r.cols;a++)s+=e.m[a][o]*r.m[n][a];i.m[n][o]=s}}return i},t}();t.Matrix=e}(r.MathHelpers||(r.MathHelpers={}))}.apply(r,i))&&(t.exports=n)},function(t,r,e){var i,n;i=[e,r,e(1),e(0)],void 0!==(n=function(t,r,e,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(t){var r=function(){function t(t){this.iteration=1e3,this.learningRate=.001,t&&(this.iteration=t.iteration?t.iteration:this.iteration,this.learningRate=t.learningRate?t.learningRate:this.learningRate),this.a=0,this.b=0}return t.prototype.train=function(t){var r=this;return new Promise(function(e,i){for(var n=0;n<r.iteration;n++)r.gradientDec(t);e([r.a,r.b])})},t.prototype.gradientDec=function(t){for(var r=0,e=0,i=0,n=0,o=(t.inputs.length,0);o<t.inputs.length;o++)i=t.inputs[o],n=t.outputs[o],r+=2/t.inputs.length*i*(n-(this.a*i+this.b))*-1,e+=2/t.inputs.length*(n-(this.a*i+this.b))*-1;this.a=this.a-r*this.learningRate,this.b=this.b-e*this.learningRate},t.prototype.predict=function(t){return t*this.a+this.b},t.prototype.import=function(t){this.a=t[0],this.b=t[1]},t.prototype.export=function(){return[this.a,this.b]},t}();t.LinearRegression=r;var n=function(){function t(t){this.middleLayerUnits=3,this.middleLayer=1,this.iteration=3,this.learningRate=.01,this.activation=new e.MathHelpers.Activation.Sigmoid,t&&(this.iteration=t.iteration?t.iteration:this.iteration,this.learningRate=t.learningRate?t.learningRate:this.learningRate,this.middleLayer=t.hiddenLayer?t.hiddenLayer:this.middleLayer,this.middleLayerUnits=t.units?t.units:this.middleLayerUnits,"htan"===t.activator&&(this.activation=new e.MathHelpers.Activation.Htan))}return t.prototype.train=function(t){var r,e=null;r=this.format(t),this.w||this.boot(r);for(var i=0;i<this.iteration;i++)e=this.forward(r.input),this.back(r,e);return this},t.prototype.boot=function(t){this.w=[],this.w.push(new e.MathHelpers.Matrix({rows:this.middleLayerUnits,cols:t.input.m[0].length,values:e.MathHelpers.Gaussian.random}));for(var r=1;r<this.middleLayer;r++)this.w.push(new e.MathHelpers.Matrix({rows:this.middleLayerUnits,cols:this.middleLayerUnits,values:e.MathHelpers.Gaussian.random}));this.w.push(new e.MathHelpers.Matrix({rows:t.output.m[0].length,cols:this.middleLayerUnits,values:e.MathHelpers.Gaussian.random}))},t.prototype.forward=function(t){var r=[];r.push(this.mutiply(this.w[0],t.transpose()));for(var e=1;e<this.middleLayer;e++)r.push(this.mutiply(this.w[e],r[e-1].result));return r.push(this.mutiply(this.w[this.w.length-1],r[r.length-1].result,!0)),r},t.prototype.back=function(t,r){var i=e.MathHelpers.Matrix.subtract(t.output.transpose(),r[r.length-1].result),n=e.MathHelpers.Matrix.multiplyElements(r[r.length-1].sum.transform(this.activation.prime),i),o=e.MathHelpers.Matrix.multiplyScalar(e.MathHelpers.Matrix.multiply(n,r[this.middleLayer-1].result.transpose()),this.learningRate);this.w[this.w.length-1]=e.MathHelpers.Matrix.add(this.w[this.w.length-1],o);for(var s=1;s<this.middleLayer;s++)n=e.MathHelpers.Matrix.multiplyElements(e.MathHelpers.Matrix.multiply(this.w[this.w.length-s].transpose(),n),r[r.length-(s+1)].sum.transform(this.activation.prime)),o=e.MathHelpers.Matrix.multiplyScalar(e.MathHelpers.Matrix.multiply(n,r[r.length-(s+1)].result.transpose()),this.learningRate),this.w[this.w.length-(s+1)]=e.MathHelpers.Matrix.add(this.w[this.w.length-(s+1)],o);return n=e.MathHelpers.Matrix.multiplyElements(e.MathHelpers.Matrix.multiply(this.w[1].transpose(),n),r[0].sum.transform(this.activation.prime)),o=e.MathHelpers.Matrix.multiplyScalar(e.MathHelpers.Matrix.multiply(n,t.input),this.learningRate),this.w[0]=e.MathHelpers.Matrix.add(this.w[0],o),i},t.prototype.predict=function(t){var r=this.forward(new e.MathHelpers.Matrix([t]));return r[r.length-1].result.m},t.prototype.mutiply=function(t,r,n){var o,s;return s=e.MathHelpers.Matrix.multiply(t,r),o=s.transform(this.activation.value),new i.Data.Sum(s,o)},t.prototype.format=function(t){for(var r=[],n=[],o=0;o<t.length;o++)r.push(t[o].input),n.push(t[o].output);return new i.Data.Normalize(new e.MathHelpers.Matrix(r),new e.MathHelpers.Matrix(n))},t.prototype.export=function(){return JSON.stringify(this.w)},t.prototype.import=function(t){this.w=JSON.parse(t)},t}();t.NeuralNetwork=n}(r.Cervello||(r.Cervello={}))}.apply(r,i))&&(t.exports=n)}])});